// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//criar uma migration :yarn prisma migrate dev
model Usuarios {
  CODIGO       Int       @id @default(autoincrement())
  NOME         String
  USUARIO      String
  SENHA        String
  NIVEL_ACESSO String
  DT_CADASTRO  DateTime? @default(now())
  DT_ALTERACAO DateTime? @default(now())
  ID_USUARIO   String    @default(uuid())

  @@map("USUARIOS")
}

model Cliente {
  CODCLI       Int       @id @default(autoincrement())
  NOME         String
  CNPJ         String
  EMAIL        String?
  TELEFONE     String?
  ENDERECO     String?
  CIDADE       String?
  BAIRRO       String?
  NUMERO       String?
  UF           String?
  PAIS         String?
  COMPLEMENTO  String?
  CEP          String?
  DT_CADASTRO  DateTime? @default(now())
  DT_ALTERACAO DateTime? @default(now())
  ID_ENTIDADE  String    @default(uuid())

  Servicos Servicos[]
  PagarB   PagarB[]
  Receber  Receber[]
  ReceberB ReceberB[]
  Pagar    Pagar[]
  @@map("CLIENTES")
}

model Maquina {
  CODIGO       Int       @id @default(autoincrement())
  DESCRICAO    String
  DT_CADASTRO  DateTime? @default(now())
  DT_ALTERACAO DateTime? @default(now())
  ID_MAQUINA   String    @default(uuid())

  Servicos Servicos[]
  @@map("MAQUINAS")
}

model Funcionario {
  CODFUN         Int       @id @default(autoincrement())
  NOME           String
  DT_CADASTRO    DateTime? @default(now())
  DT_ALTERACAO   DateTime? @default(now())
  ID_FUNCIONARIO String    @default(uuid())

  Servicos Servicos[]
  PagarB   PagarB[]
  Receber  Receber[]
  ReceberB ReceberB[]
  Pagar    Pagar[]
  @@map("FUNCIONARIOS")
}

model Produto {
  CODIGO       Int       @id @default(autoincrement())
  DESCRICAO    String
  PRECO        Float
  DT_CADASTRO  DateTime? @default(now())
  DT_ALTERACAO DateTime? @default(now())
  ID_PRODUTO   String    @default(uuid())

  Servicos Servicos[]
  @@map("PRODUTOS")
}

model Receber {
  NUMERO        Int       @id @default(autoincrement())
  CODCLI        Int
  CODFUN        Int
  VALOR_TOTAL   Float?
  PARCELA       String?
  VALOR_PARCELA Float?
  DT_CADASTRO   DateTime? @default(now())
  DT_ALTERACAO  DateTime? @default(now())
  ID_RECEBER    String    @default(uuid())


  Clientes     Cliente     @relation(fields: [CODCLI], references: [CODCLI])
  Funcionarios Funcionario @relation(fields: [CODFUN], references: [CODFUN])

  @@map("RECEBER")
}

model ReceberB {
  NUMERO        Int      @id @default(autoincrement())
  CODCLI        Int
  CODFUN        Int
  VALOR_PAGO    Float?
  PARCELA       String?
  VALOR_PARCELA Float?
  DT_PAGAMENTO  DateTime @default(now())
  ID_RECEBERB   String   @default(uuid())


  Clientes     Cliente     @relation(fields: [CODCLI], references: [CODCLI])
  Funcionarios Funcionario @relation(fields: [CODFUN], references: [CODFUN])

  @@map("RECEBERB")
}

model Pagar {
  NUMERO        Int      @id @default(autoincrement())
  CODCLI        Int
  CODFUN        Int
  VALOR_TOTAL   Float?
  PARCELA       String?
  DT_VENCIMENTO DateTime @default(now())
  DT_CADASTRO   DateTime @default(now())
  DT_ALTERACAO  DateTime @default(now())
  ID_PAGAR      String   @default(uuid())


  Clientes     Cliente     @relation(fields: [CODCLI], references: [CODCLI])
  Funcionarios Funcionario @relation(fields: [CODFUN], references: [CODFUN])

  @@map("PAGAR")
}

model PagarB {
  NUMERO       Int      @id @default(autoincrement())
  CODCLI       Int
  CODFUN       Int
  VALOR_TOTAL  Float?
  VALOR_PAGO   Float?
  PARCELA      String?
  DT_PAGAMENTO DateTime @default(now())
  ID_PAGARB    String   @default(uuid())

  Clientes     Cliente     @relation(fields: [CODCLI], references: [CODCLI])
  Funcionarios Funcionario @relation(fields: [CODFUN], references: [CODFUN])

  @@map("PAGARB")
}

model Servicos {
  CODIGO       Int      @id @default(autoincrement())
  CODCLI       Int
  NOME_CLI     String
  CODFUN       Int
  NOME_FUN     String
  VALOR        Float
  QTDE_HORAS   String
  COD_PRODUTO  Int
  COD_MAQUINA  Int
  DT_CADASTRO  DateTime @default(now())
  DT_ALTERACAO DateTime @default(now())
  ID_SERVICO   String   @default(uuid())

  Maquinas     Maquina     @relation(fields: [COD_MAQUINA], references: [CODIGO])
  Produtos     Produto     @relation(fields: [COD_PRODUTO], references: [CODIGO])
  Clientes     Cliente     @relation(fields: [CODCLI], references: [CODCLI])
  Funcionarios Funcionario @relation(fields: [CODFUN], references: [CODFUN])

  @@map("SERVICOS")
}
